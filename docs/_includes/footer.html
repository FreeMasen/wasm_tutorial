{% if page.readings %}
<div class="explain" style="width:500px;margin:auto;display:flex;flex-flow:column;align-items:first-baseline">
<span style="font-weight:bold;">Additional Reading</span>
<hr style="width:100%;border:0;border-bottom:1px solid #e8e8e8;" />
{% for reading in page.readings %}
<div class="reading">
    <span style="font-weight:bold;">[{{ forloop.index0 }}]</span>
    <a href="{{reading.url}}">{{reading.text}}</a>
</div>
{% endfor %}
</div>
{% endif %}
<footer style="width:100%;height:50px;display:flex;flex-flow:row;justify-content:space-around;">
    {% if page.prev %}
    <a id="previous-page" href="{{page.prev.url | relative_url}}">{{page.prev.text}}</a>
    {% else %}
    <div></div>
    {% endif %}
    {% if page.next %}
    <a id="next-page" href="{{page.next.url | relative_url}}">{{page.next.text}}</a>
    {% else %}
    <div></div>
    {% endif %}
</footer>
<script>
    'use strict';
    window.addEventListener('DOMContentLoaded', checkForPresentation);
    function checkForPresentation() {
        console.log('presenting =', location.search.indexOf('presenting=true') > -1)
        if (location.search.indexOf('presenting=true') > -1) {
            removeExplains();
            updateLinks();
            addArrowHandlers();
        } else {
            removePresenting();
        }
    }

    function addArrowHandlers() {
        window.addEventListener('keyup', ev => {
            switch (ev.key) {
                case 'ArrowRight':
                    return goToLink('next-page');
                case 'ArrowLeft':
                    return goToLink('previous-page');
            }
        });
    }

    function goToLink(id) {
        let a = document.getElementById(id);
        if (!a) return;
        window.location.assign(a.href);
    }

    function removeExplains() {
        removeClass('.explain');
    }

    function updateLinks() {
        let links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; i++) {
            links[i].href = links[i].href+'?presenting=true';
        }
    }

    function removePresenting() {
        removeClass('.presenting')
    }

    function removeClass(cls) {
        let elements = document.querySelectorAll(cls);
        for (var i = 0; i < elements.length; i++) {
            elements[i].parentElement.removeChild(elements[i]);
        }
    }
</script>
{% if page.js %}
<script src={{page.js | relative_url}} type="text/javascript"></script>
{% endif%}
<style>
    .wrapper {
        max-width: 910px !important;
    }

    span.err {
        background-color: transparent !important;
    }
    span.err,
    span.nn,
    span.k {
        color: #099 !important;
    }
</style>